---
description: 実装計画を立案する。
---

あなたはテクニカルプロジェクトマネージャー（TPM）です。
以下の入力情報をもとに、**GitHub Issue として登録可能な粒度**で実装計画を作成してください。

## 入力情報

1.  **要求仕様書**: `docs/requirements.md`
2.  **技術スタック**: `docs/tech_stack.md`
3.  **詳細設計書**: `docs/detailed_design.md`（存在すれば参照）
4.  **開発ルール**: `AGENTS.md`
5.  **Issue テンプレート**: `.github/ISSUE_TEMPLATE/feature_request.yml`

## 作成方針

1. **MVP ファースト**: 最小限の動作する製品を最短で構築し、そこから段階的に拡張する
2. **戦略的な順序付け**: 以下の優先度で機能を並べる
   - ミッション達成への最も直接的なパス
   - MVP から完全な製品への段階的な構築
3. **GitHub Issue 単位でタスク分解**: 各タスクは 1 Issue = 1 PR で完結する粒度とする
4. **TDD アプローチ**: 「テスト作成 → 実装 → リファクタリング」の順序を明示
5. **依存関係の明確化**: Issue 間の depends-on 関係を記述
6. **見積もり**: 各 Issue の想定工数（時間）を記載

## 出力形式

### 1. 概要テーブル

まず、全体の Issue 一覧を表形式で出力してください。

```markdown
| Issue # | タイトル | フェーズ | 依存 | 見積もり |
|---------|---------|---------|------|---------|
| 1 | プロジェクト初期化 | Setup | - | 2h |
| 2 | FastAPI 基盤構築 | Foundation | #1 | 4h |
| ... | ... | ... | ... | ... |
```

### 2. 各 Issue の詳細

各 Issue について、以下のフォーマットで出力してください。
**feature_request.yml テンプレートと整合性のある形式**とします。

```markdown
---

## Issue #N: [タイトル]

### 概要 (Summary)
[1-2文でこの Issue で達成することを記述]

### 背景 (Background)
[なぜこの Issue が必要か、前提となる Issue との関係]

### 仕様 (Specs)
- [ ] [具体的なタスク 1]
- [ ] [具体的なタスク 2]
- [ ] [具体的なタスク 3]

### 受け入れ条件 (Acceptance Criteria)
- [ ] Given [前提条件] When [操作] Then [期待結果]
- [ ] [テストコマンド] が成功すること

### 対象ファイル
- `path/to/file1.py` (新規作成)
- `path/to/file2.py` (変更)

### 見積もり
- 想定工数: Xh
- 難易度: 低/中/高

---
```

## フェーズ定義

以下のフェーズに分けてタスクを整理してください。
**MVP を最短で動作させることを最優先**とし、その後に機能を拡張していきます。

### Phase 1: Minimal Setup（最小限のセットアップ）
> **目標**: コードを書き始められる最小限の環境を整える

- プロジェクトスカッフォールディング（最小構成）
- 基本的な Linter/Formatter 設定
- 最小限のディレクトリ構成

### Phase 2: MVP Core（MVP コア機能）
> **目標**: ユーザーに価値を提供する最小限の機能を動作させる

- **MVP に必須の機能のみ**を実装（要件定義の「Must Have」に相当）
- E2E で動作確認できる最小限のパス
- ハードコードや簡易実装で構わない（後でリファクタ）

### Phase 3: MVP Polish（MVP の仕上げ）
> **目標**: MVP をデモ可能・リリース可能な状態にする

- エラーハンドリングの追加
- 基本的な UI/UX の調整
- 最低限のドキュメント整備
- MVP の動作確認テスト

---
**ここまでで MVP 完成。以降は MVP を拡張していくフェーズ。**

---

### Phase 4: Foundation（基盤強化）
> **目標**: 拡張しやすいアーキテクチャに整備する

- ロギング基盤の整備
- データベース接続の最適化
- CI/CD パイプライン構築
- Docker 環境整備

### Phase 5: Extended Features（機能拡張）
> **目標**: 「Nice to Have」機能を追加していく

- 追加機能のユニットテスト → 実装
- 外部 API 連携
- パフォーマンス最適化
- 統合テスト・E2E テストの充実

### Phase 6: Production Ready（本番対応）
> **目標**: 本番運用に耐える品質を確保する

- セキュリティ強化
- 監視・アラート設定
- 負荷テスト
- ドキュメント完備

---

## 出力先

`docs/implementation_plan.md` に出力してください。

## 注意事項

1. **日本語**で出力すること
2. 各 Issue は**独立してマージ可能**な単位とすること
3. **テストを先に書く**手順を明示すること
4. 対象ファイルは**絶対パス**ではなく**プロジェクトルートからの相対パス**で記述
5. 見積もりは**楽観的すぎない現実的な値**とすること
6. Issue 間の**依存関係をループさせない**こと
7. **MVP フェーズ（Phase 1〜3）を最優先**で計画すること
8. MVP に含めない機能は**明確に Phase 4 以降に分類**すること
9. **過度な抽象化・汎用化は MVP 後に行う**こと（YAGNI 原則）
10. **ドキュメントは実装とあわせて必要に応じて更新**すること
